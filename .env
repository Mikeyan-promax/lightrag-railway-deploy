### LightRAG Railway 部署环境配置
### 基于正确的.env文件配置，适配Railway平台

###########################
### Server Configuration
###########################
HOST=0.0.0.0
PORT=${PORT:-9621}
WEBUI_TITLE='LightRAG Railway KB'
WEBUI_DESCRIPTION="Railway部署的图谱知识库系统"
WORKERS=2
CORS_ORIGINS=*

### 安全配置
SECRET_KEY=${SECRET_KEY:-your_secret_key_here_32_characters_long}
ALLOWED_HOSTS=*

###########################
### Railway PostgreSQL 数据库配置
###########################
# Railway会自动提供DATABASE_URL环境变量
DATABASE_URL=${DATABASE_URL}

# 阿里云RDS PostgreSQL连接信息（备用配置）
POSTGRES_HOST=${POSTGRES_HOST:-pgm-2ze58b40mdfqec4zwo.pg.rds.aliyuncs.com}
POSTGRES_PORT=${POSTGRES_PORT:-5432}
POSTGRES_USER=${POSTGRES_USER:-lightrag_db}
POSTGRES_PASSWORD=${POSTGRES_PASSWORD:-LightRAG2024!@#}
POSTGRES_DATABASE=${POSTGRES_DATABASE:-lightrag_production}
POSTGRES_MAX_CONNECTIONS=${POSTGRES_MAX_CONNECTIONS:-12}

###########################
### AI 模型配置
###########################
# DeepSeek API配置
LLM_BINDING=openai
LLM_MODEL=deepseek-chat
LLM_BINDING_HOST=https://api.deepseek.com
LLM_BINDING_API_KEY=${DEEPSEEK_API_KEY}

# OpenAI API Key (兼容性) - 使用DeepSeek密钥
OPENAI_API_KEY=${DEEPSEEK_API_KEY}

# 嵌入模型配置 - 豆包
EMBEDDING_BINDING=openai
EMBEDDING_MODEL=doubao-embedding-text-240715
EMBEDDING_DIM=2560
EMBEDDING_BINDING_API_KEY=${DOUBAO_API_KEY:-6674bc28-fc4b-47b8-8795-bf79eb01c9ff}
EMBEDDING_BINDING_HOST=https://ark.cn-beijing.volces.com/api/v3

###########################
### 文件和目录配置
###########################
INPUT_DIR=./inputs
WORKING_DIR=./rag_storage
MAX_FILE_SIZE=100
ALLOWED_FILE_TYPES=.txt,.pdf,.docx,.md,.json

###########################
### 查询配置
###########################
ENABLE_LLM_CACHE=true
TOP_K=40
CHUNK_TOP_K=10
MAX_ENTITY_TOKENS=10000
MAX_RELATION_TOKENS=10000
MAX_TOTAL_TOKENS=30000
RELATED_CHUNK_NUMBER=5

###########################
### 文档处理配置
###########################
SUMMARY_LANGUAGE=Chinese
ENABLE_LLM_CACHE_FOR_EXTRACT=true
CHUNK_SIZE=1200
CHUNK_OVERLAP_SIZE=100
FORCE_LLM_SUMMARY_ON_MERGE=4
MAX_TOKENS=10000
MAX_GLEANING=1

###########################
### 并发配置
###########################
MAX_ASYNC=4
MAX_PARALLEL_INSERT=2
EMBEDDING_FUNC_MAX_ASYNC=8
EMBEDDING_BATCH_NUM=10

###########################
### LLM配置
###########################
TEMPERATURE=1.0
TIMEOUT=240

###########################
### 数据存储选择
###########################
# PostgreSQL存储配置（推荐用于Railway部署）
LIGHTRAG_KV_STORAGE=PGKVStorage
LIGHTRAG_DOC_STATUS_STORAGE=PGDocStatusStorage
LIGHTRAG_GRAPH_STORAGE=PGGraphStorage
LIGHTRAG_VECTOR_STORAGE=PGVectorStorage

###########################
### 日志配置
###########################
LOG_LEVEL=INFO
VERBOSE=false
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=5

###########################
### Railway特定配置
###########################
# Railway会自动设置这些环境变量
RAILWAY_ENVIRONMENT=${RAILWAY_ENVIRONMENT:-production}
RAILWAY_PROJECT_ID=${RAILWAY_PROJECT_ID}
RAILWAY_SERVICE_ID=${RAILWAY_SERVICE_ID}

###########################
### 健康检查配置
###########################
HEALTH_CHECK_ENDPOINT=/health
HEALTH_CHECK_TIMEOUT=30